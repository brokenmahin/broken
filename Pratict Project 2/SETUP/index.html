<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Image Search (No API Key)</title>
  <style>
    body {
      font-family: Inter, system-ui, Arial, sans-serif;
      margin: 0;
      background: #f6f7fb;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 36px 12px
    }

    h1 {
      margin: 0 0 16px;
      color: #2563eb
    }

    .bar {
      display: flex;
      gap: 10px;
      background: #fff;
      border: 1px solid #e6ebf3;
      border-radius: 999px;
      box-shadow: 0 8px 28px rgba(24, 38, 62, .08);
      padding: 10px 14px;
      width: min(820px, 92vw)
    }

    .bar input {
      flex: 1;
      border: 0;
      outline: 0;
      font-size: 16px;
      padding: 8px
    }

    .bar button {
      border: 0;
      border-radius: 999px;
      background: #2563eb;
      color: #fff;
      font-weight: 700;
      padding: 10px 18px;
      cursor: pointer
    }

    .bar button:hover {
      filter: brightness(.96)
    }

    #msg {
      margin: 12px 4px;
      color: #6b7a8c
    }

    #grid {
      width: min(1100px, 96vw);
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 10px;
      margin-top: 10px
    }

    #grid img {
      width: 100%;
      height: 180px;
      object-fit: cover;
      border-radius: 12px;
      background: #eef2f7;
      transition: transform .2s ease
    }

    #grid img:hover {
      transform: scale(1.05)
    }

    .loading::after {
      content: "";
      display: inline-block;
      width: 14px;
      height: 14px;
      margin-left: 8px;
      border-radius: 50%;
      border: 3px solid #c6cff7;
      border-top-color: #2563eb;
      animation: spin .8s linear infinite
    }

    @keyframes spin {
      to {
        transform: rotate(360deg)
      }
    }
  </style>
</head>

<body>
  <h1>Image Search</h1>
  <div class="bar" role="search">
    <input id="q" placeholder="Search imagesтАж (flower, car, animal, house, bird)">
    <button id="go">Search</button>
  </div>
  <div id="msg">Type something above and press Enter/Search.</div>
  <section id="grid"></section>

  <script>
    // рзйржЯрж╛ ржорзВрж▓ ржЬрж┐ржирж┐рж╕ HTML ржерзЗржХрзЗ ржзрж░ржЫрж┐
      const q = document.querySelector('#q'),   // ЁЯЯв рж╕рж╛рж░рзНржЪ ржЗржиржкрзБржЯ ржмржХрзНрж╕ (ржпрзЗржЦрж╛ржирзЗ рж▓рж┐ржЦржмрзЗ)
        g = document.querySelector('#grid'), // ЁЯЯв ржЫржмрж┐ржЧрзБрж▓рж╛ ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп div
        m = document.querySelector('#msg');  // ЁЯЯв рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп (Loading, Error ржЗрждрзНржпрж╛ржжрж┐)

      // async ржлрж╛ржВрж╢ржи s() = search function
      async function s(t) {
        // ЁЯФ╕ ржЗржЙржЬрж╛рж░ ржпрж╛ рж▓рж┐ржЦрзЗржЫрзЗ рждрж╛рж░ ржжрзБржЗ ржкрж╛рж╢рзЗрж░ ржлрж╛ржБржХрж╛ ржЕржВрж╢ ржХрзЗржЯрзЗ ржирж┐ржЪрзНржЫрж┐
        // ЁЯФ╕ ржпржжрж┐ ржХрж┐ржЫрзБ ржирж╛ рж▓рж┐ржЦрзЗ, рждрж╛рж╣рж▓рзЗ рж╢рзБржзрзБ "Type something..." ржорзЗрж╕рзЗржЬ ржжрзЗржЦрж╛ржмрзЗ
        if (!(t = t.trim())) return (m.textContent = 'Type something...');

        // ЁЯФ╕ рж╕рж╛рж░рзНржЪ рж╢рзБрж░рзБ рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗ тАЬLoading...тАЭ ржжрзЗржЦрж╛ржмрзЗ ржПржмржВ ржЖржЧрзЗрж░ рж╕ржм ржЫржмрж┐ ржорзБржЫрзЗ ржлрзЗрж▓ржмрзЗ
        m.textContent = 'Loading...';
        g.innerHTML = '';

        try {
          // ЁЯФ╕ Wikimedia Commons API ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржЖржиржЫрж┐ (ржПржЯрж╛ Wikipedia-рж░ ржЫржмрж┐ рж╕рж╛рж░рзНржнрж╛рж░)
          const r = await fetch('https://commons.wikimedia.org/w/api.php?' + new URLSearchParams({
            origin: '*',               // ЁЯМН ржпрзЗржХрзЛржирзЛ рж╕рж╛ржЗржЯ ржерзЗржХрзЗ ржПржЗ API ржЪрж╛рж▓рж╛ржирзЛ ржпрж╛ржмрзЗ
            format: 'json',            // ЁЯУж ржбрзЗржЯрж╛ JSON ржлрж░ржорзНржпрж╛ржЯрзЗ ржЪрж╛ржЗ
            action: 'query',           // ЁЯза ржбрзЗржЯрж╛ ржХрзБрзЯрзЗрж░рж┐ ржЯрж╛ржЗржк ржЕрзНржпрж╛ржХрж╢ржи
            generator: 'search',       // ЁЯФН рж╕рж╛рж░рзНржЪ ржХрж░рж╛рж░ ржХржорж╛ржирзНржб
            gsrsearch: t,              // ЁЯзСтАНЁЯТ╗ ржЗржЙржЬрж╛рж░рзЗрж░ ржжрзЗржУрзЯрж╛ рж╕рж╛рж░рзНржЪ ржЯрзЗржХрзНрж╕ржЯ (ржпрзЗржоржи тАЬflowerтАЭ)
            gsrlimit: 60,              // ЁЯФв ржПржХрж╕рж╛ржерзЗ рзмрзжржЯрж╛ рж░рзЗржЬрж╛рж▓рзНржЯ ржЖржиржмрзЗ
            gsrnamespace: 6,           // ЁЯЦ╝я╕П ржирж╛ржорж╕рзНржкрзЗрж╕ рзм = рж╢рзБржзрзБржорж╛рждрзНрж░ ржЫржмрж┐ ржлрж╛ржЗрж▓ (File)
            prop: 'imageinfo',         // ЁЯУ╕ ржкрзНрж░рждрж┐ржЯрж╛ ржЫржмрж┐рж░ ржЗржиржлрзЛ ржЖржиржмрзЗ
            iiprop: 'url',             // ЁЯФЧ рж╢рзБржзрзБ URL ржирзЗржмрзЗ
            iiurlwidth: 640            // ЁЯУП ржерж╛ржорзНржмржирзЗржЗрж▓ ржЫржмрж┐рж░ ржкрзНрж░рж╕рзНрже рзмрзкрзжpx
          }));

          // ЁЯФ╕ API ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ ржбрзЗржЯрж╛ JSON ржЖржХрж╛рж░рзЗ ржХржиржнрж╛рж░рзНржЯ ржХрж░ржЫрж┐
          const p = (await r.json()).query?.pages;

          // ЁЯФ╕ ржпржжрж┐ ржХрж┐ржЫрзБ рж░рзЗржЬрж╛рж▓рзНржЯ ржЖрж╕рзЗ рждрж╛рж╣рж▓рзЗ ржХрзЯржЯрж╛ ржПрж╕рзЗржЫрзЗ рждрж╛ ржжрзЗржЦрж╛ржмрзЗ
          // ЁЯФ╕ ржирж╛ ржкрзЗрж▓рзЗ тАЬNo resultsтАЭ ржжрзЗржЦрж╛ржмрзЗ
          m.textContent = p ? `Found ${Object.keys(p).length} images` : 'No results';

          // ЁЯФ╕ ржпржжрж┐ ржЫржмрж┐ ржерж╛ржХрзЗ тЖТ ржкрзНрж░рждрж┐ржЯрж╛ ржЫржмрж┐рж░ ржЬржирзНржп <img> ржмрж╛ржирж╛ржмрзЗ ржПржмржВ grid-ржПрж░ ржоржзрзНржпрзЗ ржмрж╕рж╛ржмрзЗ
          g.innerHTML = p
            ? Object.values(p) // Object ржХрзЗ array рждрзЗ рж░рзВржкрж╛ржирзНрждрж░
              .map(x => `<img src="${x.imageinfo?.[0]?.thumburl || ''}">`) // ржкрзНрж░рждрж┐ржЯрж╛ ржЫржмрж┐рж░ ржЬржирзНржп img ржЯрзНржпрж╛ржЧ рждрзИрж░рж┐
              .join('') // рж╕ржмржЧрзБрж▓рзЛ img ржПржХрж╕рж╛ржерзЗ ржпрзЛржЧ ржХрж░рзЗ HTML ржмрж╛ржирж╛ржирзЛ
            : '';

        } catch {
          // тЭМ ржпржжрж┐ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржмрж╛ рж╕рж╛рж░рзНржнрж╛рж░ ржПрж░рж░ рж╣рзЯ
          m.textContent = 'Error';
        }
      }

      // ЁЯФ╕ ржЗржЙржЬрж╛рж░ ржЯрж╛ржЗржк ржХрж░рж╛ ржмржирзНржз ржХрж░рж╛рж░ 0.4 рж╕рзЗржХрзЗржирзНржб ржкрж░рзЗ рж╕рж╛рж░рзНржЪ ржЪрж╛рж▓рзБ рж╣ржмрзЗ (debounce system)
      q.oninput = e => (clearTimeout(t), t = setTimeout(() => s(q.value), 400));

      // ЁЯФ╕ t = ржЯрж╛ржЗржорж╛рж░ ржнрзНржпрж╛рж░рж┐рзЯрзЗржмрж▓ (ржЙржкрж░рзЗрж░ debounce-ржПрж░ ржЬржирзНржп ржжрж░ржХрж╛рж░)
      let t;

  </script>
</body>

</html>